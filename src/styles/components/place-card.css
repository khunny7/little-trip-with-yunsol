/* Extracted place card styles from base.css for better modularity */
.place-card-new { display:flex; flex-direction:column; border:1px solid var(--color-border); border-radius: var(--radius-xl); background: var(--color-surface); overflow:hidden; position:relative; box-shadow: var(--shadow-sm); transition: var(--transition-base); }
.place-card-new:hover { box-shadow:0 4px 10px -2px rgba(0,0,0,0.12),0 10px 32px -6px rgba(0,0,0,0.12); }
.place-card-new:focus-within { box-shadow:0 0 0 3px rgba(99,102,241,0.45),0 4px 16px -4px rgba(0,0,0,0.18); }
.place-visual { aspect-ratio: 4/3; display:flex; align-items:center; justify-content:center; font-size:3rem; background: radial-gradient(circle at 30% 30%, var(--color-primary) 0%, var(--color-primary-active) 100%); color:#fff; position:relative; }
.place-visual.has-cover { background: #0f172a; }
.card-flag-buttons { position:absolute; top:6px; right:6px; display:flex; flex-direction:column; gap:6px; }
.flag-btn { background:rgba(0,0,0,0.45); backdrop-filter:blur(4px); border:1px solid rgba(255,255,255,0.15); width:30px; height:30px; display:flex; align-items:center; justify-content:center; border-radius:8px; font-size:16px; cursor:pointer; color:#fff; transition:background .2s, transform .2s; }
.flag-btn:hover { background:rgba(0,0,0,0.65); transform:translateY(-2px); }
.flag-btn.active { background: var(--color-primary); border-color: var(--color-primary); }
.flag-btn.hide { font-size:15px; }
:root[data-theme='dark'] .flag-btn { background:rgba(255,255,255,0.12); border-color:rgba(255,255,255,0.18); }
:root[data-theme='dark'] .flag-btn:hover { background:rgba(255,255,255,0.22); }
:root[data-theme='dark'] .flag-btn.active { background: var(--color-primary); }
.place-visual .card-cover-img { position:absolute; inset:0; width:100%; height:100%; object-fit:cover; filter:brightness(.9); transition:transform .6s ease; }
.place-card-new:hover .place-visual.has-cover .card-cover-img { transform:scale(1.04); }
.place-visual.has-cover .card-cover-fallback { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; font-size:2.2rem; color:rgba(255,255,255,0.4); mix-blend-mode:soft-light; }
.badge-toddler { position:absolute; top:8px; left:8px; right:auto; background: linear-gradient(120deg,var(--color-primary) 0%, var(--color-primary-hover) 100%); color:#fff; font-size:0.625rem; font-weight:600; padding:4px 8px; border-radius: var(--radius-pill); letter-spacing:.5px; display:flex; align-items:center; gap:4px; z-index:2; }
.place-body { padding: var(--space-5); display:flex; flex-direction:column; gap: var(--space-4); }
.place-name { font-weight:600; font-size:1rem; letter-spacing:-.3px; }
.place-desc { font-size:0.8125rem; color: var(--color-text-dim); line-height:1.45; min-height:2.4em; }
.feature-tags { display:flex; flex-wrap:wrap; gap:6px; }
.tag { --tag-bg: var(--color-surface-alt); --tag-color: var(--color-text-dim); font-size:0.625rem; text-transform:uppercase; letter-spacing:.7px; font-weight:600; padding:4px 8px; border-radius: var(--radius-pill); background: var(--tag-bg); color: var(--tag-color); border:1px solid var(--color-border); display:inline-flex; align-items:center; gap:4px; position:relative; }
.tag[data-group='outdoor'] { --tag-bg:#DCFCE7; --tag-color:#166534; }
.tag[data-group='indoor'] { --tag-bg:#E0F2FE; --tag-color:#075985; }
.tag[data-group='food'] { --tag-bg:#FFEDD5; --tag-color:#9A3412; }
.tag[data-group='art'] { --tag-bg:#F3E8FF; --tag-color:#6D28D9; }
.tag[data-group='learn'] { --tag-bg:#E0E7FF; --tag-color:#4338CA; }
.tag[data-group='play'] { --tag-bg:#FCE7F3; --tag-color:#BE185D; }
.tag.clickable { position:relative; }
.tag.clickable:active { transform:translateY(1px); }
.place-meta-new { display:flex; justify-content:space-between; align-items:center; gap: var(--space-3); font-size:0.675rem; text-transform:uppercase; letter-spacing:.5px; font-weight:600; color: var(--color-text-faint); }
.meta-pill { background: var(--color-soft); color:#5C4B00; padding:4px 8px; border-radius: var(--radius-pill); }
.price-pill { background: var(--color-mint); color:#083F2E; padding:4px 8px; border-radius: var(--radius-pill); }
.card-footer { font-size:0.7rem; color: var(--color-primary); font-weight:600; display:flex; align-items:center; gap:4px; }
.place-card-new:hover .card-footer { text-decoration:underline; }

/* Elevated card polish */
.place-card-new { background: linear-gradient(180deg,var(--color-surface) 0%, var(--color-surface-alt) 140%); border:1px solid rgba(0,0,0,0.04); box-shadow:0 2px 4px -2px rgba(0,0,0,0.08),0 4px 16px -4px rgba(0,0,0,0.06); }
.place-card-new:hover { box-shadow:0 4px 10px -2px rgba(0,0,0,0.12),0 10px 32px -6px rgba(0,0,0,0.12); }
.place-card-new:focus-within { box-shadow:0 0 0 3px rgba(99,102,241,0.45),0 4px 16px -4px rgba(0,0,0,0.18); }

/* Ripple effect (pure CSS using pseudo) */
.btn, .flag-btn { position:relative; overflow:hidden; }
.btn:active::after, .flag-btn:active::after { content:""; position:absolute; left:50%; top:50%; width:0; height:0; background:rgba(255,255,255,0.4); border-radius:50%; transform:translate(-50%,-50%); animation:ripple .6s ease-out; pointer-events:none; }
@keyframes ripple { to { width:240%; height:240%; opacity:0; } }

/* Status pills row on card */
.card-status-row { position:absolute; right:8px; left:auto; top:8px; display:flex; gap:6px; z-index:3; }
.status-pill { background:rgba(255,255,255,0.85); color:var(--color-text); border:1px solid var(--color-border); font-size:0.55rem; font-weight:600; letter-spacing:.5px; padding:3px 6px; border-radius:10px; text-transform:uppercase; display:inline-flex; align-items:center; gap:4px; backdrop-filter:blur(6px); }
:root[data-theme='dark'] .status-pill { background:rgba(30,41,59,.65); color:var(--color-text-dim); }
.status-pill.liked { background:linear-gradient(90deg,#fb7185,#f472b6); color:#fff; border:none; }
.status-pill.pinned { background:linear-gradient(90deg,#38bdf8,#6366f1); color:#fff; border:none; }
.status-pill.hidden { background:linear-gradient(90deg,#94a3b8,#64748b); color:#fff; border:none; }

/* Section divider utility */
.section-divider { position:relative; padding-top:var(--space-7); margin-top:var(--space-7); }
.section-divider::before { content:""; position:absolute; left:0; top:0; width:100%; height:1px; background:linear-gradient(90deg,transparent,var(--color-border),transparent); }

/* Hero parallax (simple scale) */
.detail-hero.with-cover .cover-image-wrapper img { will-change:transform; transform-origin:center; animation: heroScale 18s linear infinite alternate; }
@keyframes heroScale { from { transform:scale(1); } to { transform:scale(1.06); } }

/* Progressive blur image helper */
.blur-up { filter:blur(16px); opacity:0; transition:filter 600ms ease, opacity 600ms ease; }
.blur-up.loaded { filter:blur(0); opacity:1; }

/* Skeleton */
.skeleton { position:relative; overflow:hidden; background: var(--color-surface-alt); }
.skeleton::after { content:""; position:absolute; inset:0; background:linear-gradient(90deg,transparent,rgba(255,255,255,0.6),transparent); animation: shimmer 1.4s infinite; }
@keyframes shimmer { 0% { transform:translateX(-100%); } 100% { transform:translateX(100%); } }
.skeleton-line { border-radius:4px; }
.skeleton-card { position:relative; overflow:hidden; border:1px solid var(--color-border); border-radius: var(--radius-xl); background: var(--color-surface); display:flex; flex-direction:column; }
.skeleton-card .place-visual { background: var(--color-surface-alt); }
.skeleton-chip-row { display:flex; gap:6px; flex-wrap:wrap; margin-top:8px; }
.skeleton-chip { width:48px; height:16px; border-radius:12px; }

/* Home / Discover controls layout & visual tokens */
.controls-row { display:flex; gap:0.5rem; flex-wrap:wrap; align-items:center; }
.controls-row .controls-count { font-size:0.75rem; color:var(--color-text-dim); margin-left:6px; }

.controls-view-toggle { display:flex; gap:6px; padding:4px; background:var(--surface-alt); border:1px solid var(--border-default); border-radius:12px; }
.controls-view-toggle .btn { padding:0.45rem 0.6rem; font-size:0.8rem; }
.controls-view-toggle .btn.btn-seg { border-radius:8px; }
.controls-view-toggle .btn.btn-seg.active { box-shadow: none; }

.quick-filters-row { display:flex; flex-wrap:wrap; gap:8px; margin-top:8px; align-items:center; }
.quick-filters-row .btn-chip { font-size:0.78rem; padding:0.4rem 0.7rem; border-radius:12px; }

.controls-right { margin-left:auto; display:flex; align-items:center; gap:8px; }
.sort-label { font-size:0.75rem; color:var(--text-secondary); }
.sort-select { font-size:0.82rem; padding:6px 8px; border-radius:8px; border:1px solid var(--border-default); background:var(--surface-default); color:var(--text-primary); }

.filter-panel { border:1px solid var(--border-default); background:var(--surface-default); border-radius:16px; padding:16px; }

/* Small screens: stack controls vertically to avoid cramped UI */
@media (max-width:640px) {
  .controls-row { flex-direction:column; align-items:flex-start; gap:8px; }
  .controls-right { margin-left:0; width:100%; justify-content:flex-start; gap:10px; }
  .quick-filters-row { gap:6px; }
}

/* Responsive adjustments */
@media (max-width: 600px) { .header-inner { gap: var(--space-3); } .nav-new { gap: var(--space-2); } .place-body { padding: var(--space-4); } }
@media (max-width: 640px) {
  .header-inner { flex-wrap:wrap; align-items:flex-start; gap: var(--space-3); padding: var(--space-2) 0 var(--space-2); }
  .brand { flex:1 1 100%; font-size:1rem; }
  .nav-new { order:3; width:100%; overflow-x:auto; -webkit-overflow-scrolling:touch; scrollbar-width:none; }
  .nav-new::-webkit-scrollbar { display:none; }
  .nav-link { flex:0 0 auto; padding: var(--space-2) var(--space-3); font-size:0.8rem; }
  .app-header { backdrop-filter: blur(14px); }
  .header-inner.allow-wrap { flex-wrap:wrap; align-items:center; }
  .header-inner.allow-wrap .brand-block { flex:1 1 auto; min-width:0; }
  .header-inner.allow-wrap .header-actions { order:2; margin-left:auto; }
  .header-inner.allow-wrap .nav-new { order:3; flex:1 0 100%; width:100%; justify-content:flex-start; gap: var(--space-2); margin-top:4px; }
  .nav-new.nav-compact { overflow:visible; }
}

/* Detail page header compact adjustments reuse app header classes */
.place-detail .app-header:not(.app-header-polished) .header-inner { padding: var(--space-2) 0; }
@media (max-width:640px) {
  .place-detail .app-header:not(.app-header-polished) .header-inner { flex-wrap:wrap; }
  .place-detail .app-header:not(.app-header-polished) .nav-new { flex:1 1 100%; order:3; gap: var(--space-2); }
  .place-detail .app-header:not(.app-header-polished) .brand { flex:1 1 auto; }
  .place-detail .app-header:not(.app-header-polished) .back-button { margin-right:4px; }
}

/* Professional Header Variant */
.app-header-pro { background: linear-gradient(90deg,rgba(255,255,255,0.92),rgba(245,247,250,0.92)); backdrop-filter: blur(18px) saturate(1.4); border-bottom:1px solid rgba(0,0,0,0.06); box-shadow:0 2px 4px -2px rgba(0,0,0,0.08),0 8px 28px -6px rgba(0,0,0,0.08); }
:root[data-theme='dark'] .app-header-pro { background: linear-gradient(90deg,rgba(30,41,59,0.92),rgba(15,23,42,0.92)); border-bottom:1px solid rgba(255,255,255,0.08); box-shadow:0 2px 4px -2px rgba(0,0,0,0.65),0 8px 28px -6px rgba(0,0,0,0.65); }
.app-header-pro .brand { font-weight:650; font-size:1.12rem; letter-spacing:-0.6px; }
app-header-pro .nav-link { border-radius:10px; padding:8px 14px; font-size:0.82rem; font-weight:600; letter-spacing:.4px; color:var(--text-secondary); }
