/* Base resets + CSS Variables generated from tokens (light theme) */
:root {
  /* Colors */
  --color-bg: #FFFFFF;
  --color-bg-alt: #F7F9FB;
  --color-surface: #FFFFFF;
  --color-surface-alt: #EEF2F5;
  --color-border: #E2E8F0;
  --color-border-strong: #CBD5E1;
  --color-text: #1F2A37;
  --color-text-dim: #556070;
  --color-text-faint: #6B7280;
  --color-primary: #6366F1;
  --color-primary-hover: #5558D9;
  --color-primary-active: #4C51BF;
  --color-warm: #FB6F5E;
  --color-mint: #4CC9A6;
  --color-soft: #FFE897;
  --color-danger: #DC2626;
  --color-danger-bg: #FEE2E2;
  --color-warning: #F59E0B;
  --color-success: #059669;
  --color-focus-ring: #6366F1;

  /* Extended Neutral + Accent Scale */
  --neutral-50:#F8FAFC; --neutral-100:#F1F5F9; --neutral-200:#E2E8F0; --neutral-300:#CBD5E1; --neutral-400:#94A3B8; --neutral-500:#64748B; --neutral-600:#475569; --neutral-700:#334155; --neutral-800:#1E293B; --neutral-900:#0F172A;
  --accent-pink:#F472B6; --accent-sky:#38BDF8; --accent-amber:#FBBF24; --accent-emerald:#10B981;

  /* Semantic Aliases */
  --surface-default: var(--color-surface);
  --surface-alt: var(--color-surface-alt);
  --surface-elevated: #ffffff;
  --border-default: var(--color-border);
  --text-primary: var(--color-text);
  --text-secondary: var(--color-text-dim);
  --text-tertiary: var(--color-text-faint);

  /* Radii */
  --radius-xs: 2px;
  --radius-sm: 4px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --radius-xl: 16px;
  --radius-xxl: 24px;
  --radius-pill: 999px;

  /* Spacing 4px scale */
  --space-0: 0;
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 20px;
  --space-6: 24px;
  --space-7: 32px;
  --space-8: 40px;
  --space-9: 48px;
  --space-10: 56px;
  --space-11: 64px;

  /* Shadows */
  --shadow-sm: 0 1px 2px rgba(0,0,0,0.06);
  --shadow-md: 0 4px 12px -2px rgba(0,0,0,0.08);
  --shadow-lg: 0 8px 28px -6px rgba(0,0,0,0.12);
  --shadow-focus: 0 0 0 3px rgba(99,102,241,0.4);

  --transition-fast: 120ms cubic-bezier(.4,0,.2,1);
  --transition-base: 200ms cubic-bezier(.4,0,.2,1);

  --max-width: 1280px;
}

/* Modern reset */
*, *::before, *::after { box-sizing: border-box; }
html { -webkit-text-size-adjust: 100%; }
body { margin:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; background: var(--color-bg-alt); color: var(--color-text); line-height: 1.5; transition: background var(--transition-base), color var(--transition-base); position:relative; }
body::before { content:""; position:fixed; inset:0; z-index:-2; background:radial-gradient(circle at 20% 15%, rgba(99,102,241,0.15), transparent 60%), radial-gradient(circle at 80% 70%, rgba(251,111,94,0.12), transparent 55%), linear-gradient(180deg,var(--color-bg) 0%, var(--color-bg-alt) 100%); }
body::after { content:""; position:fixed; inset:0; z-index:-1; background:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160' viewBox='0 0 160 160'%3E%3Ccircle cx='2' cy='2' r='2' fill='%23cbd5e140'/%3E%3C/svg%3E"); opacity:.4; mix-blend-mode:overlay; pointer-events:none; }
:root[data-theme='dark'] body::before { background:radial-gradient(circle at 18% 12%, rgba(129,140,248,0.18), transparent 60%), radial-gradient(circle at 82% 72%, rgba(251,139,120,0.18), transparent 55%), linear-gradient(180deg,var(--color-bg) 0%, var(--color-bg-alt) 100%); }
:root[data-theme='dark'] body::after { opacity:.25; }

/* Scrollbar (webkit) */
body { scrollbar-width: thin; scrollbar-color: var(--color-primary) transparent; }
body::-webkit-scrollbar { width: 10px; }
body::-webkit-scrollbar-track { background: transparent; }
body::-webkit-scrollbar-thumb { background: var(--color-border); border-radius: 40px; }
body::-webkit-scrollbar-thumb:hover { background: var(--color-primary); }

/* Animated nav underline */
.nav-new { position:relative; }
.nav-new::after { content:""; position:absolute; bottom:0; height:2px; background:var(--color-primary); border-radius:2px; width: var(--nav-underline-w,0); transform:translateX(var(--nav-underline-x,0)); transition: width var(--transition-fast), transform var(--transition-fast); }
.nav-link { position:relative; }
.nav-link:hover::after { content:""; position:absolute; left:10%; right:10%; bottom:4px; height:2px; background:var(--color-primary); border-radius:2px; opacity:.5; }

/* Typography scale utility classes */
.h1 { font-size: 2.25rem; font-weight: 600; line-height:1.15; }
.h2 { font-size: 1.875rem; font-weight: 600; line-height:1.2; }
.h3 { font-size: 1.5rem; font-weight: 600; }
.h4 { font-size: 1.25rem; font-weight: 600; }
.h5 { font-size:1.125rem; font-weight:600; line-height:1.3; }
.h6 { font-size:1rem; font-weight:600; line-height:1.3; }
.text-dim { color: var(--color-text-dim); }
.text-faint { color: var(--color-text-faint); }
.caption { font-size:0.6875rem; letter-spacing:0.5px; text-transform:uppercase; font-weight:600; }

/* Utility spacing */
.stack-sm > * + * { margin-top: var(--space-3); }
.stack-md > * + * { margin-top: var(--space-5); }
.stack-lg > * + * { margin-top: var(--space-7); }
.stack-xs > * + * { margin-top: var(--space-2); }

/* Utility Layout classes */
.cluster { display:flex; flex-wrap:wrap; gap: var(--space-3); }
.auto-grid { display:grid; gap: var(--space-5); grid-template-columns:repeat(auto-fill,minmax(var(--auto-grid-min,180px),1fr)); }
.ratio-16x9 { aspect-ratio:16/9; }
.ratio-square { aspect-ratio:1/1; }
.pad-sm { padding: var(--space-3); } .pad-md { padding: var(--space-5); } .pad-lg { padding: var(--space-7); }
.rounded { border-radius: var(--radius-lg); }
.elevate-sm { box-shadow: var(--shadow-sm); }
.elevate-md { box-shadow: var(--shadow-md); }

/* Layout container */
.container-new { width:100%; max-width: var(--max-width); margin:0 auto; padding:0 var(--space-7); }
@media (max-width: 900px) { .container-new { padding:0 var(--space-4); } }
@media (max-width: 600px) { .container-new { padding:0 var(--space-3); } }

/* New App Shell */
.app-shell { min-height:100vh; display:grid; grid-template-rows: auto 1fr; background: linear-gradient(180deg,var(--color-bg) 0%, var(--color-bg-alt) 100%); }
.app-header { position:sticky; top:0; z-index:var(--z-header,100); backdrop-filter: blur(10px); background:rgba(255,255,255,0.85); border-bottom:1px solid var(--color-border); }
.header-inner { display:flex; align-items:center; gap:var(--space-6); padding: var(--space-3) 0; }
.brand { font-weight:600; font-size:1.125rem; color:var(--color-primary); text-decoration:none; letter-spacing:-0.5px; }
.nav-new { display:flex; gap:var(--space-4); align-items:center; }
.nav-link { position:relative; padding: var(--space-2) var(--space-3); border-radius: var(--radius-md); font-weight:500; color:var(--color-text-dim); text-decoration:none; transition: var(--transition-base); }
.nav-link:hover { color:var(--color-text); background: var(--color-surface-alt); }
.nav-link.active { color:var(--color-primary); background: var(--color-surface-alt); }
.nav-link.active::after { content:""; position:absolute; left:50%; bottom:4px; width:6px; height:6px; background:var(--color-primary); border-radius:50%; transform:translateX(-50%); }

/* Compact header styles */
.header-compact { min-height:52px; }
.brand-block { display:flex; align-items:center; }
.brand-short { display:none; }
.header-actions { margin-left:auto; display:flex; align-items:center; gap:6px; }

@media (max-width:640px) {
  .header-inner.header-compact { flex-wrap:nowrap; gap:var(--space-3); padding: var(--space-2) 0; }
  .brand-full { display:none; }
  .brand-short { display:inline-block; font-size:0.95rem; letter-spacing:-0.3px; }
  .nav-new.nav-compact { flex:1 1 auto; justify-content:flex-start; overflow-x:auto; gap: var(--space-2); }
  .nav-new.nav-compact::-webkit-scrollbar { display:none; }
  .nav-link { padding:6px 10px; font-size:0.7rem; }
  .app-header { border-bottom:1px solid var(--color-border); }
}

/* Buttons */
.btn { --btn-bg: var(--color-surface); --btn-color: var(--color-text); --btn-border: var(--color-border); display:inline-flex; align-items:center; gap:var(--space-2); font-weight:500; border:1px solid var(--btn-border); background:var(--btn-bg); color:var(--btn-color); padding:0.55rem 1rem; border-radius: var(--radius-md); font-size:0.875rem; line-height:1.2; transition: var(--transition-fast); text-decoration:none; }
.btn:hover { background: var(--color-surface-alt); }
.btn:active { transform: translateY(1px); }
.btn-primary { --btn-bg: var(--color-primary); --btn-color:#fff; --btn-border: var(--color-primary); box-shadow:0 2px 4px rgba(99,102,241,0.3); }
.btn-primary:hover { --btn-bg: var(--color-primary-hover); }
.btn-primary:active { --btn-bg: var(--color-primary-active); }
.btn-ghost { --btn-bg:transparent; --btn-border:transparent; --btn-color: var(--color-text-dim); }
.btn-ghost:hover { background: var(--color-surface-alt); }
.btn-soft { --btn-bg: var(--color-surface-alt); --btn-border: var(--color-border); --btn-color: var(--color-text-dim); }
.btn-soft:hover { --btn-bg: var(--color-surface); --btn-color: var(--color-text); }
.btn-outline { --btn-bg:transparent; --btn-color: var(--color-text-dim); --btn-border: var(--color-border); }
.btn-outline:hover { --btn-color: var(--color-text); background: var(--color-surface-alt); }
/* Combined (order-independent) */
.btn-primary.btn-ghost, .btn-ghost.btn-primary { --btn-bg: var(--color-primary); --btn-border: var(--color-primary); --btn-color:#fff; }
.btn-danger { --btn-bg: var(--color-danger); --btn-border: var(--color-danger); --btn-color:#fff; }
.btn-danger:hover { filter: brightness(.95); }
/* Segmented toggle buttons (view switch) */
.btn-seg { --btn-bg:transparent; --btn-border:transparent; --btn-color: var(--color-text-dim); font-size:0.7rem; padding:0.5rem 0.85rem; border-radius:8px; text-transform:capitalize; }
.btn-seg:hover { --btn-color: var(--color-text); background: var(--color-surface-alt); }
.btn-seg.active { --btn-bg: var(--color-primary); --btn-border: var(--color-primary); --btn-color:#fff; box-shadow:0 2px 4px rgba(99,102,241,0.25); }
.btn-seg.active:hover { --btn-bg: var(--color-primary-hover); }
/* Chip buttons (quick filters) */
.btn-chip { --btn-bg: var(--color-surface-alt); --btn-border: var(--color-border); --btn-color: var(--color-text-dim); font-size:0.7rem; padding:0.45rem 0.75rem; border-radius: var(--radius-pill); }
.btn-chip:hover { --btn-bg: var(--color-surface); --btn-color: var(--color-text); }
.btn-chip.active { --btn-bg: rgba(99,102,241,0.12); --btn-border: var(--color-primary); --btn-color: var(--color-primary); }
.btn-chip.active:hover { --btn-bg: rgba(99,102,241,0.18); }
.btn-chip:focus-visible { box-shadow:0 0 0 2px #fff, 0 0 0 4px var(--color-primary); }

/* Card */
.card { background: var(--color-surface); border:1px solid var(--color-border); border-radius: var(--radius-xl); padding: var(--space-6); box-shadow: var(--shadow-sm); position:relative; transition: var(--transition-base); }
.card:hover { box-shadow: var(--shadow-md); }
.card-title { font-size:1rem; font-weight:600; margin-bottom: var(--space-3); }

/* Place Grid (new) */
.place-grid-new { display:grid; gap: var(--space-6); grid-template-columns: repeat(auto-fill,minmax(260px,1fr)); }

/* New Place Card */
.place-card-new { display:flex; flex-direction:column; border:1px solid var(--color-border); border-radius: var(--radius-xl); background: var(--color-surface); overflow:hidden; position:relative; box-shadow: var(--shadow-sm); transition: var(--transition-base); }
.place-card-new:hover { box-shadow:0 4px 10px -2px rgba(0,0,0,0.12),0 10px 32px -6px rgba(0,0,0,0.12); }
.place-card-new:focus-within { box-shadow:0 0 0 3px rgba(99,102,241,0.45),0 4px 16px -4px rgba(0,0,0,0.18); }
.place-visual { aspect-ratio: 4/3; display:flex; align-items:center; justify-content:center; font-size:3rem; background: radial-gradient(circle at 30% 30%, var(--color-primary) 0%, var(--color-primary-active) 100%); color:#fff; position:relative; }
.place-visual.has-cover { background: #0f172a; }
.card-flag-buttons { position:absolute; top:6px; right:6px; display:flex; flex-direction:column; gap:6px; }
.flag-btn { background:rgba(0,0,0,0.45); backdrop-filter:blur(4px); border:1px solid rgba(255,255,255,0.15); width:30px; height:30px; display:flex; align-items:center; justify-content:center; border-radius:8px; font-size:16px; cursor:pointer; color:#fff; transition:background .2s, transform .2s; }
.flag-btn:hover { background:rgba(0,0,0,0.65); transform:translateY(-2px); }
.flag-btn.active { background: var(--color-primary); border-color: var(--color-primary); }
.flag-btn.hide { font-size:15px; }
:root[data-theme='dark'] .flag-btn { background:rgba(255,255,255,0.12); border-color:rgba(255,255,255,0.18); }
:root[data-theme='dark'] .flag-btn:hover { background:rgba(255,255,255,0.22); }
:root[data-theme='dark'] .flag-btn.active { background: var(--color-primary); }
.place-visual .card-cover-img { position:absolute; inset:0; width:100%; height:100%; object-fit:cover; filter:brightness(.9); transition:transform .6s ease; }
.place-card-new:hover .place-visual.has-cover .card-cover-img { transform:scale(1.04); }
.place-visual.has-cover .card-cover-fallback { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; font-size:2.2rem; color:rgba(255,255,255,0.4); mix-blend-mode:soft-light; }
.badge-toddler { position:absolute; top:8px; left:8px; right:auto; background: linear-gradient(120deg,var(--color-primary) 0%, var(--color-primary-hover) 100%); color:#fff; font-size:0.625rem; font-weight:600; padding:4px 8px; border-radius: var(--radius-pill); letter-spacing:.5px; display:flex; align-items:center; gap:4px; z-index:2; }
.place-body { padding: var(--space-5); display:flex; flex-direction:column; gap: var(--space-4); }
.place-name { font-weight:600; font-size:1rem; letter-spacing:-.3px; }
.place-desc { font-size:0.8125rem; color: var(--color-text-dim); line-height:1.45; min-height:2.4em; }
.feature-tags { display:flex; flex-wrap:wrap; gap:6px; }
.tag { --tag-bg: var(--color-surface-alt); --tag-color: var(--color-text-dim); font-size:0.625rem; text-transform:uppercase; letter-spacing:.7px; font-weight:600; padding:4px 8px; border-radius: var(--radius-pill); background: var(--tag-bg); color: var(--tag-color); border:1px solid var(--color-border); display:inline-flex; align-items:center; gap:4px; position:relative; }
.tag[data-group='outdoor'] { --tag-bg:#DCFCE7; --tag-color:#166534; }
.tag[data-group='indoor'] { --tag-bg:#E0F2FE; --tag-color:#075985; }
.tag[data-group='food'] { --tag-bg:#FFEDD5; --tag-color:#9A3412; }
.tag[data-group='art'] { --tag-bg:#F3E8FF; --tag-color:#6D28D9; }
.tag[data-group='learn'] { --tag-bg:#E0E7FF; --tag-color:#4338CA; }
.tag[data-group='play'] { --tag-bg:#FCE7F3; --tag-color:#BE185D; }
.tag.clickable { position:relative; }
.tag.clickable:active { transform:translateY(1px); }
.place-meta-new { display:flex; justify-content:space-between; align-items:center; gap: var(--space-3); font-size:0.675rem; text-transform:uppercase; letter-spacing:.5px; font-weight:600; color: var(--color-text-faint); }
.meta-pill { background: var(--color-soft); color:#5C4B00; padding:4px 8px; border-radius: var(--radius-pill); }
.price-pill { background: var(--color-mint); color:#083F2E; padding:4px 8px; border-radius: var(--radius-pill); }
.card-footer { font-size:0.7rem; color: var(--color-primary); font-weight:600; display:flex; align-items:center; gap:4px; }
.place-card-new:hover .card-footer { text-decoration:underline; }

/* Elevated card polish */
.place-card-new { background: linear-gradient(180deg,var(--color-surface) 0%, var(--color-surface-alt) 140%); border:1px solid rgba(0,0,0,0.04); box-shadow:0 2px 4px -2px rgba(0,0,0,0.08),0 4px 16px -4px rgba(0,0,0,0.06); }
.place-card-new:hover { box-shadow:0 4px 10px -2px rgba(0,0,0,0.12),0 10px 32px -6px rgba(0,0,0,0.12); }
.place-card-new:focus-within { box-shadow:0 0 0 3px rgba(99,102,241,0.45),0 4px 16px -4px rgba(0,0,0,0.18); }

/* Ripple effect (pure CSS using pseudo) */
.btn, .flag-btn { position:relative; overflow:hidden; }
.btn:active::after, .flag-btn:active::after { content:""; position:absolute; left:50%; top:50%; width:0; height:0; background:rgba(255,255,255,0.4); border-radius:50%; transform:translate(-50%,-50%); animation:ripple .6s ease-out; pointer-events:none; }
@keyframes ripple { to { width:240%; height:240%; opacity:0; } }

/* Status pills row on card */
.card-status-row { position:absolute; right:8px; left:auto; top:8px; display:flex; gap:6px; z-index:3; }
.status-pill { background:rgba(255,255,255,0.85); color:var(--color-text); border:1px solid var(--color-border); font-size:0.55rem; font-weight:600; letter-spacing:.5px; padding:3px 6px; border-radius:10px; text-transform:uppercase; display:inline-flex; align-items:center; gap:4px; backdrop-filter:blur(6px); }
:root[data-theme='dark'] .status-pill { background:rgba(30,41,59,.65); color:var(--color-text-dim); }
.status-pill.liked { background:linear-gradient(90deg,#fb7185,#f472b6); color:#fff; border:none; }
.status-pill.pinned { background:linear-gradient(90deg,#38bdf8,#6366f1); color:#fff; border:none; }
.status-pill.hidden { background:linear-gradient(90deg,#94a3b8,#64748b); color:#fff; border:none; }

/* Section divider utility */
.section-divider { position:relative; padding-top:var(--space-7); margin-top:var(--space-7); }
.section-divider::before { content:""; position:absolute; left:0; top:0; width:100%; height:1px; background:linear-gradient(90deg,transparent,var(--color-border),transparent); }

/* Hero parallax (simple scale) */
.detail-hero.with-cover .cover-image-wrapper img { will-change:transform; transform-origin:center; animation: heroScale 18s linear infinite alternate; }
@keyframes heroScale { from { transform:scale(1); } to { transform:scale(1.06); } }

/* Progressive blur image helper */
.blur-up { filter:blur(16px); opacity:0; transition:filter 600ms ease, opacity 600ms ease; }
.blur-up.loaded { filter:blur(0); opacity:1; }

/* Skeleton */
.skeleton { position:relative; overflow:hidden; background: var(--color-surface-alt); }
.skeleton::after { content:""; position:absolute; inset:0; background:linear-gradient(90deg,transparent,rgba(255,255,255,0.6),transparent); animation: shimmer 1.4s infinite; }
@keyframes shimmer { 0% { transform:translateX(-100%); } 100% { transform:translateX(100%); } }
.skeleton-line { border-radius:4px; }
.skeleton-card { position:relative; overflow:hidden; border:1px solid var(--color-border); border-radius: var(--radius-xl); background: var(--color-surface); display:flex; flex-direction:column; }
.skeleton-card .place-visual { background: var(--color-surface-alt); }
.skeleton-chip-row { display:flex; gap:6px; flex-wrap:wrap; margin-top:8px; }
.skeleton-chip { width:48px; height:16px; border-radius:12px; }

/* Home / Discover controls layout & visual tokens */
.controls-row { display:flex; gap:0.5rem; flex-wrap:wrap; align-items:center; }
.controls-row .controls-count { font-size:0.75rem; color:var(--color-text-dim); margin-left:6px; }

.controls-view-toggle { display:flex; gap:6px; padding:4px; background:var(--surface-alt); border:1px solid var(--border-default); border-radius:12px; }
.controls-view-toggle .btn { padding:0.45rem 0.6rem; font-size:0.8rem; }
.controls-view-toggle .btn.btn-seg { border-radius:8px; }
.controls-view-toggle .btn.btn-seg.active { box-shadow: none; }

.quick-filters-row { display:flex; flex-wrap:wrap; gap:8px; margin-top:8px; align-items:center; }
.quick-filters-row .btn-chip { font-size:0.78rem; padding:0.4rem 0.7rem; border-radius:12px; }

.controls-right { margin-left:auto; display:flex; align-items:center; gap:8px; }
.sort-label { font-size:0.75rem; color:var(--text-secondary); }
.sort-select { font-size:0.82rem; padding:6px 8px; border-radius:8px; border:1px solid var(--border-default); background:var(--surface-default); color:var(--text-primary); }

.filter-panel { border:1px solid var(--border-default); background:var(--surface-default); border-radius:16px; padding:16px; }

/* Small screens: stack controls vertically to avoid cramped UI */
@media (max-width:640px) {
  .controls-row { flex-direction:column; align-items:flex-start; gap:8px; }
  .controls-right { margin-left:0; width:100%; justify-content:flex-start; gap:10px; }
  .quick-filters-row { gap:6px; }
}

/* Responsive adjustments */
@media (max-width: 600px) { .header-inner { gap: var(--space-3); } .nav-new { gap: var(--space-2); } .place-body { padding: var(--space-4); } }
@media (max-width: 640px) {
  .header-inner { flex-wrap:wrap; align-items:flex-start; gap: var(--space-3); padding: var(--space-2) 0 var(--space-2); }
  .brand { flex:1 1 100%; font-size:1rem; }
  .nav-new { order:3; width:100%; overflow-x:auto; -webkit-overflow-scrolling:touch; scrollbar-width:none; }
  .nav-new::-webkit-scrollbar { display:none; }
  .nav-link { flex:0 0 auto; padding: var(--space-2) var(--space-3); font-size:0.8rem; }
  .app-header { backdrop-filter: blur(14px); }
  .header-inner.allow-wrap { flex-wrap:wrap; align-items:center; }
  .header-inner.allow-wrap .brand-block { flex:1 1 auto; min-width:0; }
  .header-inner.allow-wrap .header-actions { order:2; margin-left:auto; }
  .header-inner.allow-wrap .nav-new { order:3; flex:1 0 100%; width:100%; justify-content:flex-start; gap: var(--space-2); margin-top:4px; }
  .nav-new.nav-compact { overflow:visible; }
}

/* Detail page header compact adjustments reuse app header classes */
.place-detail .app-header:not(.app-header-polished) .header-inner { padding: var(--space-2) 0; }
@media (max-width:640px) {
  .place-detail .app-header:not(.app-header-polished) .header-inner { flex-wrap:wrap; }
  .place-detail .app-header:not(.app-header-polished) .nav-new { flex:1 1 100%; order:3; gap: var(--space-2); }
  .place-detail .app-header:not(.app-header-polished) .brand { flex:1 1 auto; }
  .place-detail .app-header:not(.app-header-polished) .back-button { margin-right:4px; }
}

/* Professional Header Variant */
.app-header-pro { background: linear-gradient(90deg,rgba(255,255,255,0.92),rgba(245,247,250,0.92)); backdrop-filter: blur(18px) saturate(1.4); border-bottom:1px solid rgba(0,0,0,0.06); box-shadow:0 2px 4px -2px rgba(0,0,0,0.08),0 8px 28px -6px rgba(0,0,0,0.08); }
:root[data-theme='dark'] .app-header-pro { background: linear-gradient(90deg,rgba(30,41,59,0.92),rgba(15,23,42,0.92)); border-bottom:1px solid rgba(255,255,255,0.08); box-shadow:0 2px 4px -2px rgba(0,0,0,0.65),0 8px 28px -6px rgba(0,0,0,0.65); }
.app-header-pro .brand { font-weight:650; font-size:1.12rem; letter-spacing:-0.6px; }
.app-header-pro .nav-link { border-radius:10px; padding:8px 14px; font-size:0.82rem; font-weight:600; letter-spacing:.4px; color:var(--text-secondary); }
.app-header-pro .nav-link.active { background:rgba(99,102,241,0.12); color:var(--color-primary); }
.app-header-pro .nav-link:hover { background:rgba(99,102,241,0.08); color:var(--color-text); }
.app-header-pro .header-actions { gap:10px; }
.app-header-pro .nav-new::after { bottom:2px; height:2px; background:linear-gradient(90deg,var(--color-primary),var(--color-warm)); }
/* Slight main fade panel */
main.container-new { position:relative; }
main.container-new::before { content:""; position:absolute; inset:0; background:linear-gradient(180deg,rgba(255,255,255,0.65),rgba(255,255,255,0)); pointer-events:none; opacity:.4; }
:root[data-theme='dark'] main.container-new::before { background:linear-gradient(180deg,rgba(30,41,59,0.6),rgba(30,41,59,0)); }
/* Dark Theme */
:root[data-theme='dark'] {
  --color-bg: #0F172A;
  --color-bg-alt: #1E293B;
  --color-surface: #1E293B;
  --color-surface-alt: #334155;
  --color-border: #334155;
  --color-border-strong: #475569;
  --color-text: #F1F5F9;
  --color-text-dim: #CBD5E1;
  --color-text-faint: #94A3B8;
  --color-primary: #818CF8;
  --color-primary-hover: #6366F1;
  --color-primary-active: #4F46E5;
  --color-warm: #FB8B78;
  --color-mint: #5ED8B6;
  --color-soft: #FFEFAF;
  --color-danger: #F87171;
  --color-danger-bg: #7F1D1D;
  --color-warning: #FBBF24;
  --color-success: #10B981;
  --color-focus-ring: #818CF8;
  /* subtle adjusts */
  --shadow-sm: 0 1px 2px rgba(0,0,0,0.5);
  --shadow-md: 0 4px 12px -2px rgba(0,0,0,0.55);
  --shadow-lg: 0 8px 28px -6px rgba(0,0,0,0.6);
  --shadow-focus: 0 0 0 3px rgba(129,140,248,0.4);
}

/* Adjust header bg in dark */
:root[data-theme='dark'] .app-header { background: rgba(30,41,59,0.85); }
:root[data-theme='dark'] .place-card-new { background: var(--color-surface); }
:root[data-theme='dark'] .btn { --btn-bg: var(--color-surface); }
:root[data-theme='dark'] .nav-link.active { background: var(--color-surface); }
:root[data-theme='dark'] .btn-outline { --btn-color: var(--color-text-faint); }
:root[data-theme='dark'] .btn-outline:hover { --btn-color: var(--color-text); }
:root[data-theme='dark'] .skeleton { background: var(--color-surface-alt); }
:root[data-theme='dark'] .skeleton::after { background:linear-gradient(90deg,transparent,rgba(255,255,255,0.08),transparent); }

/* Dark theme adjustments for new elements */
:root[data-theme='dark'] .place-card-new { background: linear-gradient(180deg,var(--color-surface) 0%, var(--color-surface-alt) 130%); border:1px solid rgba(255,255,255,0.05); }
:root[data-theme='dark'] .place-card-new:hover { box-shadow:0 4px 14px -2px rgba(0,0,0,0.5),0 10px 28px -4px rgba(0,0,0,0.55); }
:root[data-theme='dark'] .status-pill { border-color:rgba(255,255,255,0.1); }

/* Focus ring refinement for list/card items */
.place-card-new:focus-visible { outline:none; box-shadow:0 0 0 3px rgba(255,255,255,0.9),0 0 0 6px var(--color-primary); }

/* === Unified Header Nav Styles (override legacy duplicates) === */
.nav-new .nav-link { border-radius:10px; padding:8px 14px; font-size:0.82rem; font-weight:600; letter-spacing:.4px; color:var(--text-secondary); background:transparent; position:relative; }
.nav-new .nav-link:hover { background:rgba(99,102,241,0.08); color:var(--color-text); }
.nav-new .nav-link.active { background:rgba(99,102,241,0.12); color:var(--color-primary); }
/* Remove old active dot + hover underline effect inside unified header */
.nav-new .nav-link.active::after { content:none; }
.nav-new .nav-link:hover::after { content:none; }
/* Dark theme fine-tune */
:root[data-theme='dark'] .nav-new .nav-link:hover { background:rgba(129,140,248,0.09); }
:root[data-theme='dark'] .nav-new .nav-link.active { background:rgba(129,140,248,0.16); }
/* ============================================================= */

/* Polished Header Styles */
.app-header-polished { --header-pad-x: var(--space-5); }
.app-header-polished .header-inner-polished { padding-left: var(--header-pad-x); padding-right: var(--header-pad-x); }
@media (max-width:900px){ .app-header-polished { --header-pad-x: var(--space-4); } }
@media (max-width:600px){ .app-header-polished { --header-pad-x: var(--space-3); } }

/* Brand refinements */
.app-header-polished .brand { display:inline-flex; align-items:center; gap:10px; padding:6px 10px 6px 4px; margin-left:-4px; border-radius:14px; position:relative; text-decoration:none; }
.app-header-polished .brand:hover { background:rgba(99,102,241,0.08); }
.app-header-polished .brand-mark { font-size:1.15rem; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.15)); }
.app-header-polished .brand-text { padding-right:2px; }
.app-header-polished .brand-text-short { padding-right:2px; }
/* Brand text collapse: show long title on desktop, short on small screens */
.app-header-polished .brand-text { display:inline-block; }
.app-header-polished .brand-text-short { display:none; }
@media (max-width:640px) {
  .app-header-polished .brand-text { display:none; }
  .app-header-polished .brand-text-short { display:inline-block; }
}

/* Nav polished */
.nav-polished { position:relative; display:flex; gap:2px; padding:4px; background:rgba(255,255,255,0.55); backdrop-filter:blur(14px) saturate(1.4); border:1px solid rgba(0,0,0,0.06); border-radius: 14px; box-shadow:0 1px 2px rgba(0,0,0,0.06),0 4px 16px -4px rgba(0,0,0,0.08); }
:root[data-theme='dark'] .nav-polished { background:rgba(30,41,59,0.55); border-color:rgba(255,255,255,0.08); box-shadow:0 1px 2px rgba(0,0,0,0.5),0 4px 18px -4px rgba(0,0,0,0.55); }
.nav-polished .nav-link { position:relative; padding:8px 16px; border-radius:10px; font-size:0.8rem; font-weight:600; letter-spacing:.35px; color:var(--text-secondary); background:transparent; transition: var(--transition-fast); }
.nav-polished .nav-link:hover { color:var(--color-text); background:rgba(99,102,241,0.07); }
.nav-polished .nav-link.active { color:var(--color-primary); }
/* Underline indicator inside each active link (bottom aligned) */
.nav-polished .nav-link::after { content:""; position:absolute; left:12px; right:12px; bottom:4px; height:3px; border-radius:2px; background:linear-gradient(90deg,var(--color-primary) 0%, var(--color-warm) 100%); opacity:0; transform:translateY(4px); transition:opacity var(--transition-fast), transform var(--transition-fast); }
.nav-polished .nav-link.active::after { opacity:1; transform:translateY(0); }
.nav-polished .nav-link:focus-visible { outline:none; box-shadow:0 0 0 2px var(--color-primary),0 0 0 5px rgba(99,102,241,0.35); }

/* Remove legacy moving underline for polished nav */
.nav-polished::after { content:none !important; }

/* Dark adjustments for active background for clarity */
:root[data-theme='dark'] .nav-polished .nav-link.active { background:rgba(129,140,248,0.12); }
:root[data-theme='dark'] .nav-polished .nav-link:hover { background:rgba(129,140,248,0.1); }

/* Responsive nav tweaks */
@media (max-width:760px){
  .nav-polished { padding:4px; gap:2px; }
  .nav-polished .nav-link { padding:7px 14px; font-size:0.72rem; }
  .nav-polished .nav-link::after { left:10px; right:10px; bottom:3px; height:2px; }
}
@media (max-width:520px){
  .nav-polished { width:100%; justify-content:space-between; }
  .nav-polished .nav-link { flex:1 1 auto; text-align:center; }
}

/* Editing badge refinement */
.app-header-polished .header-badge { background: linear-gradient(90deg,var(--color-primary),var(--color-warm)); color:#fff; font-size:0.6rem; letter-spacing:0.8px; font-weight:700; padding:4px 7px 3px; border-radius: var(--radius-pill); margin-left:10px; box-shadow:0 2px 6px -2px rgba(0,0,0,0.25); }
/* Place card action row adjustments */
.card-actions { display:none; }
.visual-planned { position:absolute; left:8px; bottom:8px; z-index:4; }
.visual-planned .status-pill { padding:6px 10px; border-radius:12px; font-size:0.78rem; }
.visual-actions { position:absolute; right:8px; bottom:8px; display:flex; gap:8px; z-index:5; }
.visual-actions .flag-btn { width:36px; height:36px; border-radius:10px; font-size:16px; }
.visual-actions .flag-btn.hide { font-size:15px; }

@media (max-width:480px) {
  .visual-actions .flag-btn { width:32px; height:32px; }
  .visual-planned .status-pill { padding:5px 8px; font-size:0.7rem; }
}
